{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{\"337\":function(e,t,n){e.exports={\"edit_box\":\"edit-address-module__edit_box___2PEM1\",\"moren\":\"edit-address-module__moren___2DHy9\",\"switch\":\"edit-address-module__switch___t7_kH\",\"area_content\":\"edit-address-module__area_content___39ihS\",\"icon_arrow\":\"edit-address-module__icon_arrow___3NYl-\",\"area_box\":\"edit-address-module__area_box___1Xgpu\",\"show_area_box\":\"edit-address-module__show_area_box___2k5Jb\",\"grayText\":\"edit-address-module__grayText___tQKdt\",\"button_box\":\"edit-address-module__button_box___pjDV0\",\"del_address\":\"edit-address-module__del_address___BaI5t\",\"addressContainer\":\"edit-address-module__addressContainer___3Of1w\",\"addressTitle\":\"edit-address-module__addressTitle___MgsUI\",\"textarea\":\"edit-address-module__textarea___358oq\"}},\"339\":function(e,t,n){e.exports={\"dialog_box\":\"index-module__dialog_box___Oax4U\",\"box\":\"index-module__box___3tOIf\",\"content\":\"index-module__content___2nH1s\",\"btn_box\":\"index-module__btn_box___3zaYo\",\"btn\":\"index-module__btn___2Ynh9\",\"red\":\"index-module__red___UzQVn\",\"after\":\"index-module__after___2Kfih\"}},\"63\":function(e,t,n){\"use strict\";n.r(t);var a=n(1),r=n(3),o=n(345),i=n(346),s=n(355),c=n(354),l=n(362),u=n(363),d=n(364),f=n(0),p=n(78),_=n(8),h=n(337),m=n.n(h),g=n(339),b=n.n(g),v=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var y=function(e){function Dialog(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Dialog);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(Dialog.__proto__||Object.getPrototypeOf(Dialog)).call(this,e));return t.cancle=function(){(0,t.props.cancle)()},t.ok=function(){(0,t.props.ok)()},t.state={},t}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Dialog,r[\"a\"].Component),v(Dialog,[{\"key\":\"render\",\"value\":function render(){var e=this.props,t=e.content,n=void 0===t?\"内容\":t,r=e.okText,i=void 0===r?\"确定\":r,s=e.cancleText,c=void 0===s?\"取消\":s;return a.j.createElement(o.a,{\"className\":b.a.dialog_box},a.j.createElement(o.a,{\"className\":b.a.box},a.j.createElement(o.a,{\"className\":b.a.content+\" last\"},n),a.j.createElement(o.a,{\"className\":b.a.btn_box},a.j.createElement(o.a,{\"className\":b.a.btn+\" \"+b.a.after,\"onClick\":this.cancle},c),a.j.createElement(o.a,{\"className\":b.a.btn+\" \"+b.a.red,\"onClick\":this.ok},i))))}}]),Dialog}(),C=n(358),j=n(82),k=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var w,x=function(e){function AreaPicker(e){!function area_picker_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,AreaPicker);var t=function area_picker_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(AreaPicker.__proto__||Object.getPrototypeOf(AreaPicker)).call(this,e));return t.dealData=function(e){t.regionDatas[0]=e.filter(function(e){return 0===e.level}),t.regionDatas[1]=e.filter(function(e){return 1===e.level}),t.regionDatas[2]=e.filter(function(e){return 2===e.level})},t.getList=function(){var e=t.props.value,n=t.state,a=n.range,r=n.checked;_.a.common.getAreaList({\"parentCode\":null,\"level\":null,\"pageNo\":0,\"pageSize\":5e4}).then(function(n){if(n){var o=n.records;if(t.dealData(j.Common.clone(o)),Array.isArray(e)&&e.length){var i=void 0;e.forEach(function(e,n){a[n]=0===n?t.regionDatas[0]:t.onFindChild(n-1,i),r[n]=a[n].find(function(t){return\"\"+t.areaCode==\"\"+e})||{},i=e})}else a[0]=t.regionDatas[0],a[1]=t.onFindChild(0,a[0][0].areaCode),a[2]=t.onFindChild(1,a[1][0].areaCode),r.push(a[0][0],a[1][0],a[2][0]);t.setState({\"checked\":r,\"range\":a})}}).catch(function(e){throw e})},t.onFindChild=function(e,n){var a=e+1;return t.regionDatas[a]&&t.regionDatas[a].filter(function(e){return n&&\"\"+e.parentCode==\"\"+n})},t.onFindIndex=function(){var e=t.state.checked,n=t.props.value,a=void 0===n?e.map(function(e){return e.areaCode}):n,r=t.state.range,o=void 0;return Array.isArray(a)&&a.length&&(o=[],a.forEach(function(e,t){o.push(r[t].findIndex(function(t){return e&&\"\"+t.areaCode==\"\"+e}))})),o},t.onChangeCity=function(e){(0,t.props.onChange)(e,t.state.checked)},t.onColumnSelect=function(e){var n=e.detail,a=n.column,r=n.value,o=t.state,i=o.range,s=o.checked,c=i[a][r];s[a]=c;var l=c;new Array(i.length-a-1).fill(\"\").forEach(function(e,n){i[a+n+1]&&(i[a+n+1]=t.onFindChild(a+n,l.areaCode),l=i[a+n+1][0],s[a+n+1]=l)}),t.setState({\"checked\":s,\"range\":i})},t.state={\"range\":[[],[],[]],\"checked\":[]},t.regionDatas=[],t}return function area_picker_inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AreaPicker,r[\"a\"].Component),k(AreaPicker,[{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){this.getList()}},{\"key\":\"render\",\"value\":function render(){var e=this.state.range,t=this.props.children,n=this.onFindIndex();return a.j.createElement(C.a,{\"mode\":\"multiSelector\",\"range\":e,\"rangeKey\":\"areaName\",\"onChange\":this.onChangeCity,\"onColumnChange\":this.onColumnSelect,\"value\":n},t)}}]),AreaPicker}(),E=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var P=Object(p.a)(w=function(e){function EditAddress(e){!function edit_address_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,EditAddress);var t=function edit_address_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(EditAddress.__proto__||Object.getPrototypeOf(EditAddress)).call(this,e));return t.getDetail=function(e){_.a.address.getDetail({\"id\":e}).then(function(e){e&&t.setState({\"receiver\":e.receiver,\"phone\":e.phone,\"isDefault\":e.isDefault,\"house\":e.house,\"area\":e.province+\"/\"+e.city+\"/\"+e.area,\"cityData\":[{\"areaName\":e.province,\"areaCode\":e.provinceId},{\"areaName\":e.city,\"areaCode\":e.cityId},{\"areaName\":e.area,\"areaCode\":e.areaId}]})})},t.onSubmit=function(e){var n=t.props.globalStore,a=t.$router.params,o=a.backUrl,i=void 0===o?\"\":o,s=a.first,c=t.state,l=c.isPhone,u=c.isDefault,d=c.cityData,p=c.id,h=c.receiver,m=c.phone,g=c.house;if(h)if(l&&m)if(d.length<3)f.message.error(\"请选择正确的省市区\");else if(g){var b={\"id\":p||\"\",\"receiver\":h,\"phone\":m,\"provinceId\":d[0].areaCode,\"province\":d[0].areaName,\"cityId\":d[1].areaCode,\"city\":d[1].areaName,\"areaId\":d[2].areaCode,\"area\":d[2].areaName,\"isDefault\":u,\"house\":g};_.a.address.addAddress(b).then(function(e){e&&(f.message.success(p?\"修改成功\":\"添加成功\"),setTimeout(function(){var e=t.$router.params;delete e.id;var a=\"?\";for(var o in e)a+=o+\"=\"+e[o];if(i.indexOf(\"submission\")>0&&\"1\"==s){var c=f.Common.clone(b);return c.streetId=\"\",c.address=c.address||c.house||\"服务器没给你地址，找后端-编辑时\",n.setData(\"checkAddress\",Object.assign({},c),\"edit-address.jsx,line:113\"),r.a.reLaunch({\"url\":\"/pages/submission/submission\"+a}),!1}r.a.reLaunch({\"url\":\"/pages/address/address\"+a})},1e3))})}else f.message.error(\"请填详细的地址\");else f.message.error(\"请填写正确的手机号码\");else f.message.error(\"请填写收件人\")},t.changeMoren=function(e){t.setState({\"isDefault\":e})},t.getInput=function(e,n){t.setState(function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{\"value\":n,\"enumerable\":!0,\"configurable\":!0,\"writable\":!0}):e[t]=n,e}({},n,e),function(){\"phone\"===n&&t.setState({\"isPhone\":/^1\\d{10}$/.test(e)})})},t.delAddress=function(){t.setState({\"visiable\":!0})},t.cancle=function(){t.setState({\"visiable\":!1})},t.ok=function(){var e=t.state.id;_.a.address.deleteAddress({\"id\":e}).then(function(e){if(e){var n=t.$router.params;delete n.id;var a=\"?\";for(var o in n)a+=o+\"=\"+n[o];r.a.reLaunch({\"url\":\"/pages/address/address\"+a})}})},t.AreaPickerChange=function(e,n){t.setState({\"cityData\":n})},t.config={\"navigationBarTitleText\":\"编辑地址\"},t.state={\"cityData\":[],\"isPhone\":!0,\"phone\":\"\",\"receiver\":\"\",\"isDefault\":!1,\"id\":\"\",\"house\":\"\",\"visiable\":!1},t}return function edit_address_inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(EditAddress,r[\"a\"].Component),E(EditAddress,[{\"key\":\"componentWillReact\",\"value\":function componentWillReact(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var e=this,t=this.$router.params.id;if(!t)return!1;this.setState({\"id\":t},function(){return e.getDetail(t)})}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"render\",\"value\":function render(){var e=this,t=this.state,n=t.cityData,r=t.phone,f=t.isPhone,p=t.receiver,_=t.house,h=t.isDefault,g=t.id,b=t.visiable;return a.j.createElement(o.a,{\"className\":\"\"+m.a.edit_box},b&&a.j.createElement(y,{\"cancle\":this.cancle,\"ok\":this.ok,\"content\":\"是否确定删除收货地址\",\"okText\":\"确定删除\"}),a.j.createElement(s.a,{\"onSubmit\":this.onSubmit,\"onReset\":this.onReset},a.j.createElement(c.a,{\"name\":\"receiver\",\"title\":\"收货人\",\"type\":\"text\",\"placeholder\":\"请输入\",\"value\":p,\"onChange\":function onChange(t){e.getInput(t,\"receiver\")}}),a.j.createElement(c.a,{\"name\":\"phone\",\"title\":\"手机号\",\"error\":!f,\"type\":\"phone\",\"placeholder\":\"请输入收货人手机号\",\"onChange\":function onChange(t){e.getInput(t,\"phone\")},\"value\":r}),a.j.createElement(o.a,{\"className\":m.a.area_content+\" last\"},a.j.createElement(o.a,{\"className\":m.a.addressTitle},\"所在地区\"),a.j.createElement(o.a,{\"className\":m.a.area_box},a.j.createElement(x,{\"onChange\":this.AreaPickerChange},a.j.createElement(o.a,{\"className\":m.a.show_area_box},n.length?n.map(function(e){return e.areaName}).join(\" / \"):a.j.createElement(i.a,{\"className\":m.a.grayText},\"请选择地区\")))),a.j.createElement(o.a,{\"className\":\"iconfont \"+m.a.icon_arrow},\"\")),a.j.createElement(o.a,{\"className\":m.a.addressContainer+\" last\"},a.j.createElement(o.a,{\"className\":m.a.addressTitle},\"详细地址\"),a.j.createElement(l.a,{\"className\":m.a.textarea,\"name\":\"house\",\"type\":\"text\",\"placeholder\":\"请输入街道、小区、门牌号等\",\"value\":_,\"onChange\":function onChange(t){e.getInput(t,\"house\")},\"placeholderClass\":m.a.placeholder})),a.j.createElement(o.a,{\"className\":(!0===h?m.a.moren:m.a.switch)+\" last\"},a.j.createElement(u.a,{\"title\":\"设为默认地址\",\"checked\":h,\"onChange\":this.changeMoren,\"name\":\"isDefault\",\"color\":\"#FF3013\"})),g&&a.j.createElement(o.a,{\"className\":m.a.del_address+\" last\",\"onClick\":this.delAddress},\"删除收货地址\"),a.j.createElement(o.a,{\"className\":m.a.button_box},a.j.createElement(d.a,{\"formType\":\"submit\"},g?\"编辑完成\":\"保存地址\"))))}}]),EditAddress}())||w;t.default=P},\"78\":function(e,t,n){\"use strict\";var a=n(1),r=n(3),o=n(345),i=n(82),s=n(14),c=n(9),l=n(79),u=n.n(l),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();t.a=function withPage(e){var t=new e({}),n=function(n){function App(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,App);var n=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(App.__proto__||Object.getPrototypeOf(App)).call(this,e));return n.onBack=function(){r.a.navigateBack()},n.updateShareConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.props.globalStore,a=globalThis.document.URL,r=(t.data.userInfo||{}).invitationCode||\"\",o=c.a.getURLSearchParams({\"mark\":r});return e=Object.assign({},{\"title\":\"康小铺|京东健康战略合作伙伴\",\"desc\":\"加入康小铺，开启创业之旅\",\"link\":a.indexOf(\"?\")>0?a+\"&\"+o:a+\"?\"+o},e),c.a.updateApp({\"params\":e}),c.a.updateApp({\"type\":\"updateTimelineShareData\",\"params\":e}),e},n.scope=function(){return{\"updateShareConfig\":n.updateShareConfig}},n.config=Object.assign({},t.config),n.updateShareConfig(),n}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(App,r.a.Component),f(App,[{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){\"function\"==typeof this.withPage.componentDidShow&&this.withPage.componentDidShow(this)}},{\"key\":\"render\",\"value\":function render(){var n=this;return a.j.createElement(o.a,{\"className\":u.a.page_container,\"style\":{\"paddingTop\":0}},a.j.createElement(o.a,{\"className\":u.a.navigationBar,\"hidden\":!0},a.j.createElement(o.a,{\"className\":u.a.navigation_back,\"onClick\":this.onBack},\"返回\"),a.j.createElement(o.a,{\"className\":u.a.navigationBar_text},t.config.navigationBarTitleText),a.j.createElement(o.a,{\"hidden\":!i.Common.isType(t.renderNavigationRight,\"function\"),\"className\":u.a.navigation_right},i.Common.isType(t.renderNavigationRight,\"function\")&&t.renderNavigationRight())),a.j.createElement(e,d({\"ref\":function ref(e){e&&(e.logger=c.b.logger.bind(e),n.withPage=e)}},this.props,{\"withPageScope\":this.scope()})))}}]),App}();return Object(s.b)(\"globalStore\")(Object(s.c)(n))}},\"79\":function(e,t,n){e.exports={\"page_container\":\"index-module__page_container___3sM0-\",\"navigationBar\":\"index-module__navigationBar___fibys\",\"navigation_back\":\"index-module__navigation_back___2U0kZ\",\"navigationBar_text\":\"index-module__navigationBar_text___1fBn_\",\"navigation_right\":\"index-module__navigation_right___uhu-i\",\"back_icon\":\"index-module__back_icon___JzgRf\"}}}]);","extractedComments":[]}