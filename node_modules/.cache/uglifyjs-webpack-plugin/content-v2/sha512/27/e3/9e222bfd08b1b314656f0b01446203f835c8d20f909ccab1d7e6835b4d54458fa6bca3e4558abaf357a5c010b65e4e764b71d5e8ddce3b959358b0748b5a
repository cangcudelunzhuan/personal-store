{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{\"266\":function(e,t,n){e.exports={\"before\":\"storeinfo-module__before___12s6X\",\"after\":\"storeinfo-module__after___1INCQ\",\"head_img\":\"storeinfo-module__head_img___23OX6\",\"mtb\":\"storeinfo-module__mtb___34h7j\",\"name\":\"storeinfo-module__name____8_iD\",\"type\":\"storeinfo-module__type___30mZq\",\"desc\":\"storeinfo-module__desc___27f2L\",\"btn\":\"storeinfo-module__btn___2Yzsp\",\"red_btn\":\"storeinfo-module__red_btn___cqJ96\",\"schedule_box\":\"storeinfo-module__schedule_box___2wkQg\",\"down\":\"storeinfo-module__down___Is_N6\",\"red_down\":\"storeinfo-module__red_down___1PiHI\",\"list\":\"storeinfo-module__list___17Yqz\",\"insert\":\"storeinfo-module__insert___VKlGv\",\"save_btn\":\"storeinfo-module__save_btn___1UMww\",\"list_one\":\"storeinfo-module__list_one___35FvU\",\"gray_button\":\"storeinfo-module__gray_button___1PUyy\",\"logo_box\":\"storeinfo-module__logo_box___2B_PL\",\"pick_box\":\"storeinfo-module__pick_box___3Im5J\",\"wx_box\":\"storeinfo-module__wx_box___Q8HvW\",\"has_errorline\":\"storeinfo-module__has_errorline___2gwDB\",\"icon\":\"storeinfo-module__icon___2EJwG\"}},\"268\":function(e,t,n){e.exports={\"container\":\"index-module__container___1vqdX\",\"code_box\":\"index-module__code_box___10T1o\",\"code\":\"index-module__code___1a6xQ\",\"img\":\"index-module__img___3ybYq\",\"main\":\"index-module__main___53DfB\",\"change_code\":\"index-module__change_code___1UmlU\"}},\"61\":function(e,t,n){\"use strict\";n.r(t);var o=n(1),a=n(3),r=n(342),i=n(343),l=n(347),s=n(92),c=n(77),u=n(8),f=n(15),_=n(266),p=n.n(_),m=n(9),d=n(268),h=n.n(d),g=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var b=function(e){function Mask(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Mask);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(Mask.__proto__||Object.getPrototypeOf(Mask)).call(this,e));return t.config={\"navigationBarTitleText\":\"查看微信二维码\"},t.state={},t}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Mask,a[\"a\"].Component),g(Mask,[{\"key\":\"render\",\"value\":function render(){var e=this.props.url;return o.j.createElement(r.a,{\"className\":h.a.container},o.j.createElement(r.a,{\"className\":h.a.main},o.j.createElement(r.a,{\"className\":h.a.code_box},o.j.createElement(r.a,{\"className\":h.a.code},o.j.createElement(l.a,{\"src\":Object(m.g)(e),\"className\":h.a.img,\"mode\":\"widthFix\"}))),o.j.createElement(r.a,{\"className\":h.a.change_code,\"onClick\":this.props.onClose},\"关闭\")))}}]),Mask}(),v=n(0),y=n(349),w=n(357),j=n(350),x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var E,O=function(e){function Collect(e){!function upload_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Collect);var t=function upload_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(Collect.__proto__||Object.getPrototypeOf(Collect)).call(this,e));return t.click=function(){t.props.onClick&&t.props.onClick()},t.onChangeFile=function(e,n,o){var a=t.props.logger,r=t.state.files;if(\"remove\"===n&&(r.splice(o,1),t.setState({\"files\":r}),t.props.onRemove(o)),\"add\"===n&&e){var i=e.slice(-1),l=i[0].file,s=l.type,c=l.size,f=t.props.maxSize,_=s.replace(/.+\\//,\"\");if(\"number\"==typeof f&&c>f){var p=f/1024/1024>1?f/1024/1024+\"M\":f/1024+\"KB\";return v.message.error(\"上传文件大小已超过\"+p),!1}t.setState({\"isloading\":!0});var d=function uploadBegin(e){var n={\"extension\":_};e&&(n.base64=e),Object(y.a)({\"url\":u.a.common.upload(),\"name\":\"file\",\"filePath\":i[0].file.path,\"header\":Object(u.b)(),\"formData\":n}).then(function(e){var n=JSON.parse(e.data),o=n.entry,l=n.responseCode;t.setState({\"isloading\":!1}),\"function\"==typeof a&&a({\"logs\":\"文件上传日志采集,文件信息:\"+JSON.stringify(i[0].file)+\",上传接口返回:\"+JSON.stringify(o)}),o?(!1!==t.props.showList&&r.push({\"url\":Object(m.g)(o.filePath)}),t.setState({\"files\":r},function(){t.props.onSuccess(o.filePath)})):\"\"+l==\"1000010003\"||\"\"+l==\"1000010001\"||\"\"+l==\"1000010002\"?Object(m.i)({\"desc\":\"[system] file:cmpt/upload.jsx line:92\"}):v.message.warn(n.message||\"文件上传异常\")})};\"undefined\"!=typeof FileReader?u.a.common.getLocalImg(i[0].url).then(function(e){var t=new FileReader;t.onload=function(e){d(encodeURIComponent(e.currentTarget.result))},t.onerror=function(){d()},t.readAsDataURL(e)}):d()}},t.config={\"navigationBarTitleText\":\"\"},t.state={\"files\":[],\"isloading\":!1},t}return function upload_inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Collect,a[\"a\"].Component),C(Collect,[{\"key\":\"render\",\"value\":function render(){var e=this.state,t=e.files,n=e.isloading;return o.j.createElement(r.a,null,o.j.createElement(w.a,x({\"files\":t,\"showAddBtn\":t.length<(this.props.size||1)},this.props.option,{\"onImageClick\":this.click,\"onChange\":this.onChangeFile})),o.j.createElement(j.a,{\"isOpened\":n,\"text\":\"正在上传\",\"icon\":\"loading\",\"status\":\"loading\",\"duration\":0}))}}]),Collect}(),k=n(144),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},N=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var P=Object(c.a)(E=function(e){function Storeinfo(e){!function storeinfo_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Storeinfo);var t=function storeinfo_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(Storeinfo.__proto__||Object.getPrototypeOf(Storeinfo)).call(this,e));return t.getInfo=function(){u.a.login.shopInfo().then(function(e){e&&(t.setState(S({},e)),t.wxup.setState({\"files\":e.weixnQrCode?[{\"url\":Object(m.g)(e.weixnQrCode)}]:[]}))})},t.saveInfo=function(){var e=t.state,n=e.logo,o=e.shopName,r=e.contacts,i=e.phone,l=e.weixnNo,s=e.weixnQrCode;u.a.shopInfo.updateBaseInfo({\"logo\":n,\"shopName\":o,\"contacts\":r,\"phone\":i,\"weixnNo\":l,\"weixnQrCode\":s}).then(function(e){e&&(m.b.bridge.callhandler(\"finish\"),v.message.success(\"已修改\"),a.a.navigateTo({\"url\":\"/pages/shopworker/shopworker\"}))})},t.change=function(e,n){var o=e.detail.value;\"phone\"===n?o=o.replace(/[^\\d]/g,\"\"):\"shopName\"===n?o=o.replace(/[^\\a-zA-Z\\u4E00-\\u9FA5\\d]/g,\"\"):\"contacts\"===n&&(o=o.replace(/[^\\a-zA-Z\\u4E00-\\u9FA5]/g,\"\")),t.setState(function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{\"value\":n,\"enumerable\":!0,\"configurable\":!0,\"writable\":!0}):e[t]=n,e}({},n,o))},t.removeWx=function(){t.setState({\"weixnQrCode\":\"\"})},t.successWx=function(e){t.setState({\"weixnQrCode\":e})},t.removeLogo=function(){t.setState({\"logo\":\"\"})},t.successLogo=function(e){t.setState({\"logo\":e})},t.scroll=function(){window.scroll(0,0)},t.config={\"navigationBarTitleText\":\"店铺工作台\"},t.state={\"before\":!1,\"mask\":!1,\"logo\":\"\",\"shopName\":\"\",\"contacts\":\"\",\"phone\":\"\",\"weixnNo\":\"\",\"weixnQrCode\":\"\"},t}return function storeinfo_inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Storeinfo,a[\"a\"].Component),N(Storeinfo,[{\"key\":\"componentWillReact\",\"value\":function componentWillReact(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){this.getInfo()}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"render\",\"value\":function render(){var e=this,t=this.state,n=t.mask,a=t.logo,c=t.shopName,u=t.contacts,_=t.phone,d=t.weixnNo,h=t.weixnQrCode,g=/^1\\d{10}$/;return o.j.createElement(r.a,null,o.j.createElement(r.a,{\"className\":p.a.after},o.j.createElement(r.a,{\"className\":p.a.list+\" last \"+p.a.logo_box},o.j.createElement(i.a,null,\"店铺头像\"),o.j.createElement(l.a,{\"className\":\"\"+p.a.head_img,\"src\":Object(m.g)(a)||f.a.register.logo}),o.j.createElement(r.a,{\"className\":p.a.pick_box},o.j.createElement(O,{\"option\":{\"length\":1},\"maxSize\":5242880,\"showList\":!1,\"onRemove\":this.removeLogo,\"onSuccess\":this.successLogo,\"ref\":function ref(t){return e.logoup=t}}))),o.j.createElement(r.a,{\"className\":p.a.list+\" last\"},o.j.createElement(i.a,null,\"店铺名称\"),o.j.createElement(r.a,null,o.j.createElement(s.a,{\"className\":p.a.insert,\"type\":\"text\",\"maxLength\":30,\"placeholder\":\"\",\"value\":c,\"onBlur\":this.scroll,\"onChange\":function onChange(t){return e.change(t,\"shopName\")}}))),o.j.createElement(r.a,{\"className\":p.a.list+\" last\"},o.j.createElement(i.a,null,\"联系人\"),o.j.createElement(r.a,null,o.j.createElement(s.a,{\"className\":p.a.insert,\"maxLength\":10,\"type\":\"text\",\"onBlur\":this.scroll,\"placeholder\":\"请输入联系人\",\"value\":u,\"onChange\":function onChange(t){return e.change(t,\"contacts\")}}))),o.j.createElement(r.a,{\"className\":p.a.list+\" last\"},o.j.createElement(i.a,null,\"联系人电话\"),o.j.createElement(r.a,{\"className\":p.a.has_errorline},o.j.createElement(s.a,{\"className\":p.a.insert,\"type\":\"text\",\"placeholder\":\"请输入联系人电话\",\"value\":_,\"maxLength\":11,\"onBlur\":this.scroll,\"onChange\":function onChange(t){return e.change(t,\"phone\")}}),!g.test(_)&&_&&o.j.createElement(k.a,{\"value\":\"alert-circle\",\"size\":\"20\",\"color\":\"#F9482E\",\"className\":p.a.icon}))),o.j.createElement(r.a,{\"className\":p.a.list+\" last\"},o.j.createElement(i.a,null,\"店铺微信号\"),o.j.createElement(r.a,null,o.j.createElement(s.a,{\"className\":p.a.insert,\"type\":\"text\",\"placeholder\":\"请输入微信号\",\"value\":d,\"onBlur\":this.scroll,\"onChange\":function onChange(t){return e.change(t,\"weixnNo\")}}))),o.j.createElement(r.a,{\"className\":p.a.list_one+\" last \"+p.a.wx_box},o.j.createElement(i.a,null,\"微信二维码\"),o.j.createElement(O,{\"option\":{\"length\":1},\"maxSize\":5242880,\"onRemove\":this.removeWx,\"onSuccess\":this.successWx,\"logger\":this.logger,\"onClick\":function onClick(){return e.setState({\"mask\":!0})},\"ref\":function ref(t){return e.wxup=t}})),c&&u&&g.test(_)&&o.j.createElement(r.a,{\"className\":p.a.save_btn,\"onClick\":this.saveInfo},\"保存\"),(!c||!u||!g.test(_))&&o.j.createElement(r.a,{\"className\":p.a.save_btn+\" \"+p.a.gray_button},\"保存\")),n&&o.j.createElement(b,{\"url\":h,\"onClose\":function onClose(){return e.setState({\"mask\":!1})}}))}}]),Storeinfo}())||E;t.default=P},\"77\":function(e,t,n){\"use strict\";var o=n(1),a=n(3),r=n(342),i=n(81),l=n(14),s=n(9),c=n(78),u=n.n(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();t.a=function withPage(e){var t=new e({}),n=function(n){function App(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,App);var n=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(App.__proto__||Object.getPrototypeOf(App)).call(this,e));return n.onBack=function(){a.a.navigateBack()},n.updateShareConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.props.globalStore,o=globalThis.document.URL,a=(t.data.userInfo||{}).invitationCode||\"\",r=s.a.getURLSearchParams({\"mark\":a});return e=Object.assign({},{\"title\":\"康小铺|京东健康战略合作伙伴\",\"desc\":\"加入康小铺，开启创业之旅\",\"link\":o.indexOf(\"?\")>0?o+\"&\"+r:o+\"?\"+r},e),s.a.updateApp({\"params\":e}),s.a.updateApp({\"type\":\"updateTimelineShareData\",\"params\":e}),e},n.scope=function(){return{\"updateShareConfig\":n.updateShareConfig}},n.config=Object.assign({},t.config),n.updateShareConfig(),n}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(App,a.a.Component),_(App,[{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){\"function\"==typeof this.withPage.componentDidShow&&this.withPage.componentDidShow(this)}},{\"key\":\"render\",\"value\":function render(){var n=this;return o.j.createElement(r.a,{\"className\":u.a.page_container,\"style\":{\"paddingTop\":0}},o.j.createElement(r.a,{\"className\":u.a.navigationBar,\"hidden\":!0},o.j.createElement(r.a,{\"className\":u.a.navigation_back,\"onClick\":this.onBack},\"返回\"),o.j.createElement(r.a,{\"className\":u.a.navigationBar_text},t.config.navigationBarTitleText),o.j.createElement(r.a,{\"hidden\":!i.Common.isType(t.renderNavigationRight,\"function\"),\"className\":u.a.navigation_right},i.Common.isType(t.renderNavigationRight,\"function\")&&t.renderNavigationRight())),o.j.createElement(e,f({\"ref\":function ref(e){e&&(e.logger=s.b.logger.bind(e),n.withPage=e)}},this.props,{\"withPageScope\":this.scope()})))}}]),App}();return Object(l.b)(\"globalStore\")(Object(l.c)(n))}},\"78\":function(e,t,n){e.exports={\"page_container\":\"index-module__page_container___3sM0-\",\"navigationBar\":\"index-module__navigationBar___fibys\",\"navigation_back\":\"index-module__navigation_back___2U0kZ\",\"navigationBar_text\":\"index-module__navigationBar_text___1fBn_\",\"navigation_right\":\"index-module__navigation_right___uhu-i\",\"back_icon\":\"index-module__back_icon___JzgRf\"}}}]);","extractedComments":[]}